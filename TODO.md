# Задачи по рефакторингу Discord бота

## Основные изменения

- [x] Создание правильной структуры проекта в новом каталоге `refactored_bot`
- [x] Настройка нового файла `setup.py` для правильной установки пакетов
- [x] Установка библиотеки disnake (версия 2.9.1)
- [x] Создание обновленного конфигурационного файла (`config.example.yaml`) с поддержкой тестовых серверов для slash-команд

## Модули ядра

- [x] Обновление класса бота в `core/bot.py` для использования disnake.ext.commands.InteractionBot
- [x] Реализация обработки ошибок slash-команд в `core/bot.py`
- [x] Обновление менеджера конфигураций в `core/config.py` с поддержкой disnake
- [x] Улучшение менеджера базы данных в `utils/db.py` для поиска SQL-схемы в разных местах

## Утилиты

- [x] Обновление менеджера локализации в `utils/language.py` для поддержки disnake и slash-команд
- [ ] Обновление логгера в `utils/logger.py` для поддержки disnake

## Команды и когды (cogs)

- [x] Обновление когда администрирования (`cogs/admin.py`) для использования slash-команд
- [x] Обновление когда модерации (`cogs/moderation.py`) для использования slash-команд
- [x] Обновление когда развлечений (`cogs/fun.py`) для использования slash-команд
- [x] Обновление когда верификации (`cogs/verification.py`) для использования slash-команд
- [x] Обновление когда музыки (`cogs/music.py`) для использования slash-команд
- [ ] Обновление когда ИИ (`cogs/ai.py`) для использования slash-команд

## Дополнительные задачи

- [ ] Создание интеграционных тестов для slash-команд
- [ ] Обновление `.env.example` с актуальными примерами переменных окружения
- [ ] Добавление документации по использованию slash-команд
- [ ] Обновление файла README.md с инструкциями по установке и запуску бота
- [ ] Проверка дополнительной конфигурации для поддержки глобальных slash-команд

## Технические задачи

- [x] Замена импортов discord на disnake
- [x] Замена контекстов команд (commands.Context) на взаимодействия (disnake.ApplicationCommandInteraction)
- [x] Обновление обработчиков событий для disnake
- [x] Обновление функций отправки сообщений (send -> response.send_message/followup.send)
- [ ] Тестирование бота на тестовом сервере Discord
- [ ] Оптимизация обработки долгих запросов с использованием defer/followup

## Интеграция с API

- [ ] Обновление интеграции с YouTube для воспроизведения музыки
- [ ] Обновление интеграции с OpenAI API для модуля AI
- [ ] Настройка интеграции с базой данных PostgreSQL